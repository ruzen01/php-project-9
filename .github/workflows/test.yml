name: CI
on: [push, pull_request]
jobs:
 test:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v2
     - name: Set up Node.js
       uses: actions/setup-node@v2
       with:
         node-version: '14'
     - run: npm install
     - name: Set up Code Climate
       uses: remarkablemark/setup-codeclimate@v2
     - run: |
         cc-test-reporter before-build
         npm test -- --coverage
         cc-test-reporter after-build --exit-code $?
       env:
         CC_TEST_REPORTER_ID: ${{ secrets.CC_TEST_REPORTER_ID }}
